apiVersion: xl/v2
kind: Blueprint
metadata:
  name: Blueprint Project
  description: A Blueprint project
  author: XebiaLabs
  version: 1.0
spec:
  parameters:
  - name: Provider
    prompt: what is your Kubernetes provider?
    type: Select
    options:
      - AWS
      - GCP
      - Azure
    default: AWS
    saveInXlvals: true

  - name: Service
    prompt: What service do you want to deploy?
    type: Select
    options:
      - !expr "Provider == 'GCP' ? ('GKE', 'CloudStorage') : (Provider == 'AWS' ? ('EKS', 'S3') : ('AKS', 'AzureStorage'))"
    default: !expr "Provider == 'GCP' ? 'GKE' : (Provider == 'AWS' ? 'EKS' : 'AKS')"
    saveInXlvals: true

  - name: K8sConfig
    prompt: What is your Kubernetes cluster name
    type: Confirm
    promptIf: !expr "Service == 'GKE' || Service == 'EKS' || Service == 'AKS'"
    default: !expr "k8sConfig('IsAvailable')"
    saveInXlvals: true

  - name: K8sClusterName
    prompt: What is your Kubernetes cluster name
    type: Input
    value: !expr "k8sConfig('ClusterServer')"
    default: "defaultVal"
    saveInXlvals: true


